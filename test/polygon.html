<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>polygon</title>
    <script src="../dist/zrender.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
        html,
        body,
        #main {
            width: 100%;
            height: 100%;
        }
    </style>
</head>

<body>
    <div id="main"></div>
    <script type="text/javascript">
        var main = document.getElementById('main');

        main.onclick = function (e) {
            console.log([e.x, e.y]);
        }

        // 初始化zrender
        var zr = zrender.init(main);

        var gradient = new zrender.LinearGradient();
        gradient.addColorStop(0, 'red');
        gradient.addColorStop(1, 'black');

        // simple polygon test
        var polygon = new zrender.Polygon({
            shape: {
                points: // two dimensional array
                    [
                        [507, 179],
                        [589, 179],
                        [641, 255],
                        [658, 335],
                        [634, 408],
                        [692, 436],
                        [705, 512],
                        [635, 559],
                        [582, 581],
                        [346, 576],
                        [288, 495],
                        [302, 389],
                        [323, 300],
                        [336, 222],
                        [388, 155],
                        [465, 113],
                        [507, 179]
                    ],

                smooth: true,
            },
            draggable: true,
            style: {
                fill: gradient,
                lineWidth: 5,
                text: 'polygon',
                textPosition: 'inside'
            }
        });
        zr.add(polygon);

        //compoundPath test,single polygon no hole
        var compath = new zrender.CompoundPath({
            shape: {
                paths: []
            },
            draggable: true,
            style: {
                fill: 'green',
                lineWidth: 5,
                text: 'taihu lake',
                textPosition: 'inside'
            }
        });

        // multi polygon ,every polygon not has hole
        var compath1 = new zrender.CompoundPath({
            shape: {
                paths: []
            },
            draggable: true,
            style: {
                fill: 'red',
                lineWidth: 5,
                text: 'taihu lake',
                textPosition: 'inside'
            }
        });


        fetch('data/polygonhasholedata.json').then(res => res.json()).then(json => {
            var polygon = new zrender.Polygon({
                shape: {
                    points: json[0] 
                }
            });
            compath.shape.paths.push(polygon);
            zr.add(compath);

            json.slice(1, json.length).forEach(function (xys) {
                var data = xys.map(function (xy) {
                    xy[0] += 400;
                    return xy;
                });
                var polygon = new zrender.Polygon({
                    shape: {
                        points: data
                    }
                });
                compath1.shape.paths.push(polygon);
            });
            zr.add(compath1);
        })
    </script>
</body>

</html>