<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>ZRender</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ZRender">
    <meta name="author" content="linzhifeng@baidu.com">
    
    <script src="doc/asset/js/esl/esl.js"></script>
    
    <!-- Le styles -->
    <link href="doc/asset/css/bootstrap.css" rel="stylesheet">
    <link href="doc/asset/css/bootstrap-responsive.css" rel="stylesheet">
    <style>
    /* GLOBAL STYLES
    -------------------------------------------------- */
    /* Padding below the footer and lighter body text */
    body {
      padding-bottom: 40px;
      color: #5a5a5a;
      font-family: "微软雅黑";
    }
    .brand img {
        vertical-align: top;
    }
    .face {
        height: 300px;
        background-color:#181818;
        margin-bottom: 30px;
    }
    #forkme_banner {
        display: block;
        position: absolute;
        top: 0;
        right: 10px;
        z-index: 10;
        padding: 10px 50px 10px 10px;
        color: #fff;
        background: url('doc/asset/img/blacktocat.png') #0090ff no-repeat 95% 50%;
        font-weight: 700;
        box-shadow: 0 0 10px rgba(0,0,0,.5);
        border-bottom-left-radius: 2px;
        border-bottom-right-radius: 2px;
    }
    /* Featurettes
    ------------------------- */
    .featurette-divider {
      margin: 30px 0; /* Space out the Bootstrap <hr> more */
    }
    .featurette {
      overflow: hidden; /* Vertically center images part 2: clear their floats. */
    }

    /* Give some space on the sides of the floated elements so text doesn't run right into it. */
    .featurette .pull-left {
      margin:10px 40px 0 0;
    }
    .featurette .pull-right {
      margin:10px 0 0 40px;
    }

    /* Thin out the marketing headings */
    .featurette-heading {
      font-size: 50px;
      font-weight: 300;
      line-height: 1;
    }

    </style>

    <!-- Fav and touch icons -->
    <link rel="shortcut icon" href="doc/asset/ico/favicon.png">
  </head>

  <body>

    <!-- NAVBAR
    ================================================== -->
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="brand" href="index.html"><img src="doc/asset/ico/favicon.png" /> ZRender</a>
          <div class="nav-collapse collapse">
              <a id="forkme_banner" href="https://github.com/ecomfe/zrender">View on GitHub</a>
              <ul class="nav">
                <li class="active"><a href="index.html"><i class="icon-home icon-white"></i> Home</a></li>
                <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Example <b class="caret"></b></a>
                  <ul class="dropdown-menu">
                    <li><a href="doc/example/demo.html">Demo</a></li>
                    <li><a href="doc/example/animation.html">Animation</a></li>
                    <li class="divider"></li>
                    <!--li class="nav-header">Library</li-->
                    <li><a href="doc/example/artist.html">Artist</a></li>
                  </ul>
                </li>
                <li><a href="#">API &amp; Doc</a></li>
                <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="icon-download-alt icon-white"></i>Download <b class="caret"></b></a>
                  <ul class="dropdown-menu">
                    <li><a href="https://github.com/ecomfe/zrender/zipball/master">ZIP</a></li>
                    <li><a href="https://github.com/ecomfe/zrender/tarball/master">TAR</a></li>
                  </ul>
                </li>
                <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Link <b class="caret"></b></a>
                  <ul class="dropdown-menu">
                    <li><a href="https://github.com/ecomfe" target="_blank">Ecom-FE</a></li>
                    <li><a href="http://fe.baidu.com/doc/ecom/tech/topic/dv/index.html" target="_blank">Data Visualization</a></li>
                    <li class="divider"></li>
                    <!--li class="nav-header">Library</li-->
                    <li><a href="http://tangram.baidu.com/" target="_blank">Tangram</a></li>
                  </ul>
                </li>
              </ul>
           </div><!--/.nav-collapse -->
        </div><!-- /.container -->
      </div><!-- /.navbar-inner -->
    </div><!-- /.navbar-wrapper -->

    <div class="face" id='face'></div>
    
    <!-- Marketing messaging and featurettes
    ================================================== -->
    <!-- Wrap the rest of the page in another container to center all the content. -->

    <div class="container">
      <div class="featurette">
        <div class="span6 pull-right">
            <img src="doc/asset/img/zrender.png" />
        </div>
        <h2 class="featurette-heading">Architecture</h2>
        <p class="lead">MVC核心封装实现图形仓库、视图渲染和交互控制：</p>
        <ul>
            <li>Stroage(M) : shape数据CURD管理</li>
            <li>Painter(V) : canvase元素生命周期管理，视图渲染，绘画，更新控制</li>
            <li>Handler(C) : 事件交互处理，实现完整dom事件模拟封装</li>
        </ul>
        <ul>
            <li>shape : 图形实体，分而治之的图形策略，可定义扩展</li>
            <li>tool : 绘画扩展相关实用方法，工具及脚手架</li>
        </ul>
      </div>
      <h2 class="featurette-heading">特色</h2>
      <hr class="featurette-divider">
      <div class="featurette">
        <div class="span5 pull-left">
            <pre>
require(
    ['zrender/zrender'],
    function(zrender) {
        // just init to get a zrender Instance
        var zr = zrender.init(document.getElementById('main'));
        // zr can be used now!
        ...
    }
);</pre>
        </div>
        <h2 class="featurette-heading">简单</h2>
        <p>无需canvas基础，精简的接口方法，符合AMD标准，易学易用。</p>
      </div>
      <hr class="featurette-divider">
      <div class="featurette">
        <div class="span5 pull-right">
            <pre>
zr.addShape({
    shape : 'circle',
    style : {
        x : 100, 
        y : 100, 
        r : 50, 
        color : 'rgba(220, 20, 60, 0.8)'
    }
});
zr.render();</pre>
        </div>
        <h2 class="featurette-heading">数据驱动</h2>
        <p>利用zrender绘图，你只需做的是定义图形数据，剩下的事情就交给zrender吧~</p>
        <p>哦，对了，差点忘记告诉你，只要在你定义图形数据时设置draggable属性为true，图形拖拽就已经可用了！</p>
      </div>
      <hr class="featurette-divider">
      <div class="featurette">
        <div class="span5 pull-left">
            <pre>
zr.addShape({
    shape : 'circle',
    style : {...},
    // 图形元素上绑定事件
    onmouseover : function(params) {concole.log('catch you!')}
});

// 全局事件
zr.on('click', function(params) {alert('Hello, zrender!')});</pre>
        </div>
        <h2 class="featurette-heading">完整的事件封装</h2>
        <p>用你再熟悉不过的dom事件模型去操作canvas里的图形元素是件很cool的事情~</p>
        <p>你不仅可以响应zrender全局事件，你甚至可以为在特定shape上添加特定事件，后续发生的一切都会按你想的那样去运行~</p>
      </div>
      <hr class="featurette-divider">
      <div class="featurette">
        <div class="span5 pull-right">
            <pre>
zr.addShape(shapeA);    // shapeA.zlevel = 0; (default) 
zr.addShape(shapeB);    // shapeB.zlevel = 1;
zr.render();

zr.modShape(shapeB.id, {color:'red'}); 
// Don't worry! Is merge!

zr.refresh();  
// Just the level 1 canvas has been refresh~</pre>
        </div>
        <h2 class="featurette-heading">高效的分层刷新</h2>
        <p>正如css中zlevel的作用一样，你可以定义把不同的shape分别放在不同的层中，这不仅实现了视觉上的上下覆盖，更重要的是当图形元素发生变化后的refresh将局限在发生了变化的图形层中，这在你利用zrender做各种动画效果时将十分有用，性能自然也更加出色~</p>
      </div>
      <hr class="featurette-divider">
      <div class="featurette">
        <div class="span5 pull-left">
            <pre>
var myShape = {
    shape : 'circle',   // sector | ring | rectangle | ...
    zlevel : 1,
    style : {
        ... // color | strokeColor | text | textFont | ... 
    },
    draggable : true
};</pre>
        </div>
        <h2 class="featurette-heading">丰富的图形选项</h2>
        <p>当前内置多种图形元素（圆形、扇形、圆环、矩形、多边形、直线、文字），统一且丰富的图形属性充分满足你的个性化需求！</p>
      </div>
      <hr class="featurette-divider">
      <div class="featurette">
        <div class="span5 pull-right">
            <pre>
function MyShape() { ... }

var shape = require('zrender/shape');
shape.define('myShape', new MyShape());     // define your shape

zr.addShape({                               // and use it!
    shape : 'myShape',
    ...
});</pre>
        </div>
        <h2 class="featurette-heading">易于扩展</h2>
        <p>分而治之的图形定义策略允许你扩展自己独有的图形元素，你既可以完整实现三个接口方法（brush、drift、isCover），也可以通过base派生后仅实现你所关心的图形细节。</p>
      </div>
      <hr>
      <!-- /END THE FEATURETTES -->

      <!-- FOOTER -->
      <footer>
        <p class="pull-right"><a href="#">Back to top</a></p>
        <p>&copy; 2013 Ecom-FE. &middot; <a href="#">Privacy</a> &middot; <a href="#">Terms</a></p>
      </footer>

    </div><!-- /.container -->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="doc/asset/js/jquery.js"></script>
    <script src="doc/asset/js/bootstrap-transition.js"></script>
    <script src="doc/asset/js/bootstrap-alert.js"></script>
    <script src="doc/asset/js/bootstrap-modal.js"></script>
    <script src="doc/asset/js/bootstrap-dropdown.js"></script>
    <script src="doc/asset/js/bootstrap-scrollspy.js"></script>
    <script src="doc/asset/js/bootstrap-tab.js"></script>
    <script src="doc/asset/js/bootstrap-tooltip.js"></script>
    <script src="doc/asset/js/bootstrap-popover.js"></script>
    <script src="doc/asset/js/bootstrap-button.js"></script>
    <script src="doc/asset/js/bootstrap-collapse.js"></script>
    <script src="doc/asset/js/bootstrap-carousel.js"></script>
    <script src="doc/asset/js/bootstrap-typeahead.js"></script>
    <script>
        var zr; // 全局可用zrender对象
        var animationTicket;    // 全局动画索引
        
        require.config({
            paths: {
                'js': 'doc/asset/js/esl/js'
            },
            packages: [
                {
                    name: 'zrender',
                    location: 'src',
                    main: 'zrender'
                }
            ]
        });           
        
        require(
            ['zrender/zrender'],
            function(zrender) {
                var zr = zrender.init(document.getElementById('face'));
                var color = require('zrender/tool/color');
                var colorIdx = 0;
                var width = Math.ceil(zr.getWidth());
                var height = Math.ceil(zr.getHeight());
                
                var i;
                var n = 50;
                var shapeList = [];
                var pos;
                var len;
                var xStart;
                // 动画元素
                for(i = 0; i < n; i++) {
                    xStart = -Math.ceil(Math.random() * 1000);
                    len = Math.ceil(Math.random() * 400);
                    pos = Math.ceil(Math.random() * height);
                    shapeList[i] = {
                        shape : 'line',
                        id : zr.newShapeId(),
                        style : {
                            xStart : xStart,
                            yStart : pos,
                            xEnd : xStart + len,
                            yEnd : pos,
                            strokeColor : 'rgba(' 
                                    + Math.round(Math.random() * 256) + ',' 
                                    + Math.round(Math.random() * 256) + ',' 
                                    + Math.round(Math.random() * 256) + ', 1)',
                            lineWidth : 1//Math.round(Math.random() * 5)
                        },
                        _animationX : Math.ceil(Math.random() * 100),
                        _len : len,
                        hoverable : false
                    };
                    zr.addShape(shapeList[i]);
                }
                var aniText = {
                    shape : 'text',
                    id : zr.newShapeId(),
                    style : {
                        x : width / 2,
                        y : 90,
                        brushType : 'stroke',
                        strokeColor : 'rgba(255, 255, 255, 0.2)',
                        lineWidth : 1,
                        text : 'ZRender',
                        textFont : 'bold 60px verdana',
                        textAlign : 'center'
                    },
                    _animationSize : 60,
                    hoverable:false
                };
                
                zr.addShape(aniText);
                
                zr.addShape({
                    shape : 'text',
                    zlevel : 1,
                    style : {
                        x : width / 2,
                        y : 90,
                        brushType : 'both',
                        color : 'rgba(30, 144, 255, 1)',
                        strokeColor : 'rgba(127, 255, 0, 0.8)',
                        lineWidth : 5,
                        shadowBlur: 25,
                        shadowColor : 'rgba(255,215,0,0.8)',
                        text : 'ZRender',
                        textFont : 'bold 65px "Times New Roman"',
                        textAlign : 'center'
                    }
                });
                
                zr.addShape({
                    shape : 'text',
                    zlevel : 1,
                    style : {
                        x : width / 2,
                        y : 160,
                        color : 'rgba(210, 105, 30, 1)',
                        shadowBlur: 10,
                        shadowColor : 'rgba(255,215,0,0.8)',
                        text : '一个轻量级的Canvas类库，MVC封装，数据驱动，提供类Dom事件模型，让canvas绘图大不同！',
                        textFont : 'normal 18px 微软雅黑',
                        textAlign : 'center'
                    },
                    hoverable:false
                });               
                
                zr.addShape({
                    shape : 'circle',
                    zlevel : 1,
                    style : {
                        x : width / 2,
                        y : 240,
                        r : 20,
                        brushType : 'both',
                        color : 'rgba(255, 69, 0, 1)',
                        strokeColor : 'rgba(255, 255, 255, 1)',
                        lineWidth : 8,
                        shadowBlur: 20,
                        shadowColor : 'rgba(255,215,0,0.8)',
                        text : 'Try',
                        textPosition : 'inside',
                        textFont : 'normal 18px 微软雅黑',
                        textAlign : 'center'
                    },
                    onclick : function(){
                        window.location = './example/demo.html';
                    }
                }); 
                
                
                // 绘画，利用render的callback可以在绘画完成后马上开始动画
                zr.render(function(){
                    animationTicket = setInterval(
                        function(){
                            var style;
                            for( i = 0; i < n; i++) {
                                // 可以跳过
                                style = shapeList[i].style;
                                
                                if (style.xStart >= width){
                                    shapeList[i]._len = Math.ceil(Math.random() * 400);
                                    shapeList[i].style.xStart = -400;
                                    shapeList[i].style.xEnd = -400 + shapeList[i]._len;
                                    shapeList[i].style.yStart = Math.ceil(Math.random() * height);
                                    shapeList[i].style.yEnd = shapeList[i].style.yStart;
                                }
                                shapeList[i].style.xStart += shapeList[i]._animationX;
                                shapeList[i].style.xEnd += shapeList[i]._animationX;
                                
                                // 就看这句就行了
                                zr.modShape(shapeList[i].id, shapeList[i]);
                            }
                            aniText._animationSize += Math.round(2000 / aniText._animationSize);
                            if (aniText._animationSize > 500) {
                                aniText._animationSize = 60;
                            }
                            aniText.style.textFont = 'bold ' + aniText._animationSize + 'px verdana';
                            zr.modShape(aniText.id, aniText);
                            
                            zr.refresh();
                        },
                        50
                    )
                });
            }
        );
    </script>
  </body>
</html>
